<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cookie Fest 2025 — Центр цифровой трансформации</title>
  <style>
    :root {
      --fest-blue: #017aff;
      --fest-dark: #050608;
      --fest-bg-dark: #1a1a1a;
      --fest-accent: #c3fe7e;
      --fest-accent-soft: rgba(195, 254, 126, 0.2);
      --fest-white: #ffffff;
      --fest-form: #c3fe7e;
      --fest-text-dark: #050608;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      width: 100%;
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: var(--fest-white);
      overflow: hidden;
      background: var(--fest-bg-dark);
      position: relative;
    }

    /* фоновые молнии сверху и снизу */
    .bg-strip {
      position: absolute;
      left: 0;
      width: 100%;
      background-repeat: no-repeat;
      background-size: 100% 100%;
      background-position: center;
      pointer-events: none;
      z-index: 0;
    }

    .bg-strip-top {
      top: 0;
      height: 220px;
      background-image: url("bg-top.png");
    }

    .bg-strip-bottom {
      bottom: 0;
      height: 380px;
      background-image: url("bg-bottom.png");
    }

    header {
      position: relative;
      z-index: 1;
      width: 100%;
      padding: 8px 24px 16px;
      display: flex;
      justify-content: flex-start;
      align-items: center;
      gap: 24px;
    }

    .logo { height: 72px; }
    .logo-min { height: 56px; }

    .tabs,
    .wrapper {
      position: relative;
      z-index: 1;
      max-width: 1080px;
      width: 100%;
      margin: 0 auto;
    }

    .tabs {
      padding: 0 24px 20px;
      display: flex;
      gap: 12px;
      justify-content: center;
    }

    .tab-btn {
      flex: 0 0 auto;
      padding: 16px 30px;
      border-radius: 999px;
      border: 2px solid var(--fest-white);
      background: var(--fest-bg-dark);
      color: var(--fest-white);
      font-size: 26px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.15s ease, color 0.15s ease, transform 0.15s ease,
        box-shadow 0.15s ease, border-color 0.15s ease;
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }

    .tab-btn.active {
      background: var(--fest-white);
      color: var(--fest-dark);
      border-color: var(--fest-accent);
      box-shadow: 0 0 0 3px var(--fest-accent-soft);
      transform: translateY(-1px);
    }

    .wrapper {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0 24px 24px;
    }

    .card {
      background: var(--fest-form);
      color: var(--fest-text-dark);
      border-radius: 28px;
      padding: 40px 52px;
      width: 100%;
      max-width: 980px;
      max-height: 1680px;
      border: 2px solid rgba(0, 0, 0, 0.18);
      box-shadow: 0 24px 60px rgba(0, 0, 0, 0.8);
      overflow-y: auto;
      overflow-x: hidden;
      scrollbar-width: none;
    }

    .card::-webkit-scrollbar { display: none; }

    h1 {
      font-size: 44px;
      margin: 0 0 24px;
      text-align: center;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    h2 { font-size: 36px; margin: 28px 0 16px; }
    h3 { font-size: 30px; margin: 24px 0 12px; }

    p {
      font-size: 26px;
      line-height: 1.35;
      margin: 8px 0;
    }

    ul { margin: 8px 0 16px 22px; padding: 0; }
    li { font-size: 26px; line-height: 1.35; margin-bottom: 4px; }

    .question-text {
      font-size: 32px;
      margin-bottom: 24px;
      line-height: 1.3;
      font-weight: 600;
    }

    .option,
    .career-option {
      width: 100%;
      text-align: left;
      background: var(--fest-white);
      color: var(--fest-text-dark);
      padding: 20px 22px;
      border-radius: 14px;
      font-size: 26px;
      margin: 10px 0;
      cursor: pointer;
      border: none;
      transition: transform 0.15s ease, box-shadow 0.15s ease,
        background 0.15s ease, border-color 0.15s ease, color 0.15s ease;
      font-weight: 500;
    }

    .option:hover,
    .career-option:hover {
      background: #f7fbff;
      transform: translateY(-2px);
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.3);
    }

    .option.correct {
      background: #c9f7c7;
      box-shadow: 0 0 0 2px #7be065;
    }

    .option.wrong {
      background: #ffd1d1;
      box-shadow: 0 0 0 2px #ff8484;
    }

    .career-option.selected {
      background: var(--fest-blue);
      color: var(--fest-white);
      box-shadow: 0 0 0 2px var(--fest-white);
      transform: translateY(-2px);
    }

    .quiz-footer {
      margin-top: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 16px;
      flex-wrap: wrap;
    }

    .quiz-feedback,
    .career-feedback {
      font-size: 24px;
      line-height: 1.3;
      min-height: 48px;
      flex: 1 1 60%;
      color: var(--fest-text-dark);
    }

    .career-feedback { display: none; }

    .next-btn,
    .career-next {
      flex: 0 0 auto;
      padding: 16px 26px;
      border-radius: 14px;
      border: none;
      background: var(--fest-blue);
      color: var(--fest-white);
      font-size: 26px;
      font-weight: 700;
      cursor: pointer;
      transition: background 0.15s ease, transform 0.15s ease,
        box-shadow 0.15s ease;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .next-btn:disabled,
    .career-next:disabled {
      opacity: 0.5;
      cursor: default;
      box-shadow: none;
      transform: none;
    }

    .next-btn:not(:disabled):hover,
    .career-next:not(:disabled):hover {
      background: #0059c4;
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.4);
      transform: translateY(-1px);
    }

    .quiz-meta,
    .career-meta {
      font-size: 22px;
      margin-bottom: 10px;
      text-align: right;
      opacity: 0.7;
      color: var(--fest-text-dark);
    }

    .hidden { display: none; }

    .quiz-result,
    .career-result {
      text-align: center;
      margin-top: 16px;
      color: var(--fest-text-dark);
    }

    .quiz-result p,
    .career-result p { text-align: center; }

    .primary-link {
      display: inline-block;
      padding: 16px 28px;
      border-radius: 14px;
      text-decoration: none;
      font-size: 26px;
      font-weight: 600;
      margin-top: 16px;
      background: var(--fest-blue);
      color: var(--fest-white);
      cursor: pointer;
      border: none;
      transition: background 0.15s ease, transform 0.15s ease,
        box-shadow 0.15s ease, color 0.15s ease, border-color 0.15s ease;
    }

    .primary-link:hover {
      background: #0059c4;
      transform: translateY(-1px);
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.45);
    }

    .primary-link.secondary {
      background: transparent;
      color: var(--fest-text-dark);
      border: 1px solid rgba(0, 0, 0, 0.3);
    }

    .primary-link.dark {
      background: var(--fest-bg-dark);
      color: var(--fest-white);
      border: 1px solid var(--fest-white);
    }

    .primary-link.dark:hover {
      background: #000000;
      border-color: var(--fest-accent);
    }

    .dept-card {
      margin-top: 20px;
      text-align: left;
      padding: 22px 24px;
      border-radius: 18px;
      border: 2px solid rgba(255, 255, 255, 0.18);
      background: rgba(0, 0, 0, 0.72);
      transition: border-color 0.2s ease, box-shadow 0.2s ease,
        background 0.2s ease, transform 0.2s ease;
      color: var(--fest-white);
    }

    .dept-card h2 {
      margin-top: 0;
      font-size: 30px;
    }

    .dept-card.highlight {
      border-color: var(--fest-accent);
      box-shadow: 0 0 0 3px var(--fest-accent-soft);
      background: rgba(0, 0, 0, 0.9);
      transform: translateY(-2px);
    }

    .certificate {
      margin-top: 24px;
      padding: 0;
      border-radius: 0;
      border: none;
      background: transparent;
      text-align: left;
      color: var(--fest-white);
    }

    .certificate-image {
      width: 100%;
      height: auto;
      display: block;
      border-radius: 18px;
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.6);
    }

    /* ========================= */
    /*   АДАПТИВКА — МОБИЛЬНЫЕ   */
    /* ========================= */
    @media (max-width: 600px) {

      body {
        overflow: auto;
        padding-bottom: 40px;
      }

      header {
        padding: 8px 12px;
        gap: 12px;
      }

      .logo { height: 48px; }
      .logo-min { height: 40px; }

      .tabs {
        padding: 0 10px 16px;
        gap: 8px;
      }

      .tab-btn {
        font-size: 18px;
        padding: 10px 18px;
        border-width: 1.5px;
      }

      .wrapper {
        padding: 0 10px 20px;
      }

      .card {
        padding: 24px 22px;
        border-radius: 20px;
        max-height: none;
      }

      h1 {
        font-size: 28px;
        margin-bottom: 16px;
      }

      .question-text {
        font-size: 22px;
        margin-bottom: 16px;
      }

      .option,
      .career-option {
        font-size: 18px;
        padding: 14px 16px;
        border-radius: 12px;
      }

      .next-btn,
      .career-next,
      .primary-link {
        font-size: 18px;
        padding: 12px 16px;
        border-radius: 10px;
      }

      .quiz-meta,
      .career-meta {
        font-size: 16px;
      }

      .dept-card {
        padding: 14px 16px;
      }

      .dept-card h2 {
        font-size: 20px;
      }

      .certificate-image {
        border-radius: 12px;
      }

      /* фоновые элементы */
      .bg-strip-top {
        height: 140px;
      }

      .bg-strip-bottom {
        height: 220px;
      }
    }

    /* =========================== */
    /*   АДАПТИВКА — ПЛАНШЕТЫ      */
    /* =========================== */
    @media (min-width: 600px) and (max-width: 1024px) {

      .card {
        padding: 36px 40px;
        border-radius: 24px;
      }

      h1 {
        font-size: 34px;
      }

      .question-text {
        font-size: 26px;
      }

      .option,
      .career-option {
        font-size: 22px;
        padding: 16px 18px;
      }

      .next-btn,
      .career-next,
      .primary-link {
        font-size: 22px;
        padding: 14px 20px;
      }

      .logo { height: 60px; }
      .logo-min { height: 50px; }

      .bg-strip-top { height: 180px; }
      .bg-strip-bottom { height: 300px; }
    }

    /* =========================== */
    /*  АДАПТИВКА — БОЛЬШИЕ ЭКРАНЫ */
    /* =========================== */
    @media (min-width: 1440px) {

      .card {
        max-width: 1100px;
        padding: 56px 70px;
        border-radius: 34px;
      }

      .tab-btn {
        font-size: 30px;
        padding: 20px 40px;
      }

      h1 {
        font-size: 54px;
      }

      .question-text {
        font-size: 38px;
      }

      .option,
      .career-option {
        font-size: 32px;
        padding: 24px 28px;
      }

      .next-btn,
      .career-next,
      .primary-link {
        font-size: 32px;
        padding: 22px 32px;
      }

      .dept-card h2 {
        font-size: 40px;
      }

      .bg-strip-top {
        height: 260px;
      }

      .bg-strip-bottom {
        height: 450px;
      }
    }

    /* ====================================== */
    /*   СУПЕРБОЛЬШИЕ МОНИТОРЫ 2K–4K (опция)  */
    /* ====================================== */
    @media (min-width: 1920px) {
      .card {
        transform: scale(1.15);
      }
    }

    @media (min-width: 2560px) {
      .card {
        transform: scale(1.35);
      }
    }

    @media (min-width: 3200px) {
      .card {
        transform: scale(1.5);
      }
    }

  </style>
</head>
<body>
  <div class="bg-strip bg-strip-top"></div>
  <div class="bg-strip bg-strip-bottom"></div>

  <header>
    <img class="logo" src="cookiefest.png" alt="Cookie Fest 2025" />
    <img class="logo-min" src="min.png" alt="Минцифра" />
  </header>

  <div class="tabs">
    <button class="tab-btn active" id="tab-quiz" onclick="switchSection('quiz')">
      Викторина
    </button>
    <button class="tab-btn" id="tab-career" onclick="switchSection('career')">
      Профориентация
    </button>
  </div>

  <div class="wrapper">
    <!-- ВИКТОРИНА -->
    <div class="card" id="section-quiz">
      <h1>Викторина Cookie Fest 2025</h1>
      <div class="quiz-meta" id="quiz-progress"></div>

      <div id="quiz-main">
        <div class="question-text" id="quiz-question"></div>
        <div id="quiz-options"></div>
        <div class="quiz-footer">
          <div class="quiz-feedback" id="quiz-feedback"></div>
          <button class="next-btn" id="quiz-next" onclick="nextQuestion()" disabled>
            Далее
          </button>
        </div>
      </div>

      <div id="quiz-result" class="quiz-result hidden">
        <h2>Результат викторины</h2>
        <p id="quiz-score-text"></p>
        <p>Узнайте, в каком отделе ваши навыки будут наиболее востребованы.</p>
        <button class="primary-link" onclick="switchSection('career')">
          Перейти к профориентации
        </button>
        <button class="primary-link dark" onclick="restartQuiz()">
          Пройти викторину заново
        </button>
      </div>
    </div>

    <!-- ПРОФОРИЕНТАЦИЯ -->
    <div class="card hidden" id="section-career">
      <h1>Профориентация Cookie Fest</h1>
      <div class="career-meta" id="career-progress"></div>

      <div id="career-main">
        <div class="question-text" id="career-question"></div>
        <div id="career-options"></div>
        <div class="quiz-footer">
          <div class="career-feedback" id="career-feedback"></div>
          <button
            class="career-next"
            id="career-next"
            onclick="nextCareerQuestion()"
            disabled
          >
            Далее
          </button>
        </div>
      </div>

      <div id="career-result" class="career-result hidden">
        <h2>Ваш отдел в Центре цифровой трансформации</h2>
        <p id="career-score-text"></p>
        <div id="career-certificate" class="certificate"></div>
        <button class="primary-link" onclick="showChosenDept()">
          Узнать подробнее об отделе
        </button>
        <button class="primary-link dark" onclick="restartCareer()">
          Пройти профориентацию заново
        </button>
      </div>

      <div id="dept-info" class="hidden">
        <div id="dept-otii" class="dept-card hidden">
          <h2>Отдел технологий искусственного интеллекта (ОТИИ)</h2>
          <p>
            ОТИИ разрабатывает и внедряет сервисы на основе нейросетей и анализа
            данных: голосовые помощники, чат-боты, аналитические панели,
            умные рекомендации для жителей и сотрудников города.
          </p>
        </div>

        <div id="dept-rgis" class="dept-card hidden">
          <h2>
            Региональная геоинформационная система и спутниковые сервисы
            (РГИС НСО / ССДС НСО)
          </h2>
          <p>
            Команда РГИСсоздаёт цифровую
            карту региона и обеспечивает точные координаты для кадастра,
            строительства, транспорта и мониторинга территорий.
          </p>
        </div>

        <div id="dept-ekc" class="dept-card hidden">
          <h2>Единый контактный центр (ЕКЦ)</h2>
          <p>
            ЕКЦ принимает обращения жителей по телефону, в мессенджерах и через
            цифровые сервисы, помогает оперативно решать вопросы и обеспечивает
            единый стандарт качества коммуникаций.
          </p>
        </div>

        <div id="dept-kj" class="dept-card hidden">
          <h2>Отдел реинжиниринга и цифровой трансформации</h2>
          <p>
            Отдел реинжиниринга и цифровой трансформации развивает ключевые
            цифровые сервисы региона, включая «Карту жителя НСО» — единый
            инструмент для льгот, проезда и городских сервисов.
          </p>
        </div>

        <div style="margin-top: 24px; display: flex; gap: 16px; flex-wrap: wrap;">
          <button class="primary-link" id="showAllDeptsBtn" onclick="showAllDepts()">
            Посмотреть все отделы
          </button>
          <button class="primary-link dark" onclick="restartCareer()">
            Пройти профориентацию заново
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    function switchSection(section) {
      const quizCard = document.getElementById("section-quiz");
      const careerCard = document.getElementById("section-career");
      const tabQuiz = document.getElementById("tab-quiz");
      const tabCareer = document.getElementById("tab-career");

      if (section === "quiz") {
        quizCard.classList.remove("hidden");
        careerCard.classList.add("hidden");
        tabQuiz.classList.add("active");
        tabCareer.classList.remove("active");
      } else {
        quizCard.classList.add("hidden");
        careerCard.classList.remove("hidden");
        tabQuiz.classList.remove("active");
        tabCareer.classList.add("active");
      }
    }

    // --------- ВИКТОРИНА ---------
    const fullQuizData = [
      // ОТИИ
      {
        q: "Чем в первую очередь занимается специалист по данным (Data Scientist)?",
        options: [
          "А) Обслуживает компьютеры и принтеры",
          "Б) Анализирует данные и строит модели на основе ИИ",
          "В) Пишет новости для сайта",
          "Г) Организует мероприятия и встречи"
        ],
        correct: 1
      },
      {
        q: "Где чаще всего используется компьютерное зрение?",
        options: [
          "А) Для распознавания изображений и видео",
          "Б) Для расчёта коммунальных платежей",
          "В) Для работы электронной почты",
          "Г) Для печати документов"
        ],
        correct: 0
      },
      {
        q: "Какова основная задача Отдела технологий искусственного интеллекта (ОТИИ) в Центре цифровой трансформации?",
        options: [
          "А) Организовывать питание на мероприятиях",
          "Б) Разрабатывать и внедрять решения на базе ИИ для города и региона",
          "В) Следить за состоянием дорог вручную",
          "Г) Проводить экскурсии по городу"
        ],
        correct: 1
      },
      {
        q: "Что такое чат-бот в городских сервисах?",
        options: [
          "А) Программа, которая автоматически отвечает на типовые вопросы жителей",
          "Б) Отдельный вид социальной сети",
          "В) Офисный помощник, который приносит документы",
          "Г) Физический робот на ресепшене"
        ],
        correct: 0
      },
      {
        q: "Какой набор данных подойдёт для обучения нейросети распознавать объекты на фото?",
        options: [
          "А) Набор текстовых документов без картинок",
          "Б) Набор размеченных изображений с подписями объектов",
          "В) Только аудиозаписи звонков",
          "Г) Список телефонов жителей"
        ],
        correct: 1
      },

      // РГИС / ССДС
      {
        q: "Что такое РГИС Новосибирской области?",
        options: [
          "А) Система для управления электронными очередями",
          "Б) Большая цифровая карта региона с данными о территории",
          "В) Музыкальный сервис для жителей",
          "Г) Чат для сотрудников"
        ],
        correct: 1
      },
      {
        q: "Какие данные называют пространственными?",
        options: [
          "А) Данные, у которых есть только дата и время",
          "Б) Данные, привязанные к координатам или объектам на карте",
          "В) Список номеров телефонов",
          "Г) Набор паролей пользователей"
        ],
        correct: 1
      },
      {
        q: "Зачем нужны спутниковые дифференциальные станции ГЛОНАСС?",
        options: [
          "А) Чтобы улучшать качество сотовой связи",
          "Б) Чтобы повышать точность определения координат до сантиметров",
          "В) Чтобы передавать телевизионный сигнал",
          "Г) Чтобы рассылать рекламные сообщения"
        ],
        correct: 1
      },
      {
        q: "Какой из примеров относится к использованию РГИС?",
        options: [
          "А) Подбор музыки в плейлисте",
          "Б) Планирование новых дорог и объектов на территории района",
          "В) Распознавание речи врача",
          "Г) Отправка массовых e-mail рассылок"
        ],
        correct: 1
      },
      {
        q: "Для чего городским службам важны точные координаты объектов?",
        options: [
          "А) Чтобы красиво оформлять отчёты",
          "Б) Чтобы правильно строить, проводить измерения и не ошибаться с границами",
          "В) Чтобы быстрее открывать интернет-страницы",
          "Г) Чтобы запускать компьютерные игры"
        ],
        correct: 1
      },

      // ЕКЦ
      {
        q: "Какова основная задача Единого контактного центра (ЕКЦ)?",
        options: [
          "А) Проводить строительный контроль на объектах",
          "Б) Принимать и обрабатывать обращения жителей по разным каналам связи",
          "В) Настраивать серверы и сетевое оборудование",
          "Г) Проводить школьные уроки информатики"
        ],
        correct: 1
      },
      {
        q: "Что обычно не входит в омниканальное обслуживание в ЕКЦ?",
        options: [
          "А) Звонки по телефону",
          "Б) Обращения через мессенджеры и чат-ботов",
          "В) Обращения через личный кабинет на портале",
          "Г) Письма на бумаге по обычной почте с ответом через месяц"
        ],
        correct: 3
      },
      {
        q: "Какое качество наиболее важно для оператора контактного центра?",
        options: [
          "А) Умение молчать и не задавать вопросов",
          "Б) Вежливое общение и умение внимательно слушать",
          "В) Умение быстро печатать смайлики",
          "Г) Умение рисовать плакаты"
        ],
        correct: 1
      },
      {
        q: "Какую часть работы ЕКЦ можно автоматизировать с помощью ИИ-робота?",
        options: [
          "А) Подписание официальных приказов",
          "Б) Ответы на типовые вопросы и маршрутизацию обращений",
          "В) Проведение строительно-монтажных работ",
          "Г) Работа бухгалтерии"
        ],
        correct: 1
      },
      {
        q: "Какой показатель показывает, насколько быстро жителю отвечают на обращение в ЕКЦ?",
        options: [
          "А) Время ожидания ответа / скорость обработки обращения",
          "Б) Количество этажей в здании",
          "В) Размер архива документов",
          "Г) Число компьютеров в офисе"
        ],
        correct: 0
      },

      // Отдел реинжиниринга и цифровой трансформации (КЖ)
      {
        q: "Что общего у студента, который оформил абонемент через «Карту жителя НСО», и у пирата из «Пиратов Карибского моря»?",
        options: [
          "А) Оба предпочитают нестандартные решения в повседневной жизни",
          "Б) Оба полагаются на карту как на ключевой инструмент для передвижения",
          "В) Оба активно используют GPS для навигации"
        ],
        correct: 1
      },
      {
        q: "Что делает «Карта жителя НСО» с вашей банковской картой «Мир», когда вы её прикладываете к турникету в метро?",
        options: [
          "А) Активирует магнитную полосу для дополнительной идентификации",
          "Б) Автоматически распознаёт профиль пользователя и предоставляет доступ к абонементу в соответствии со льготой",
          "В) Передаёт данные в центральную систему для последующей обработки"
        ],
        correct: 1
      },
      {
        q: "Какой вариант проезда самый выгодный, удобный и быстрый?",
        options: [
          "А) Пешком – просто и без материальных вложений, но долго и устанешь",
          "Б) С обычным пластиковым проездным – оформление с очередями и дополнительная пластиковая карта",
          "В) Проездной в «Карте жителя НСО» – твой проездной, твоя банковская карта. Всё управляется онлайн: продление, смена карты, контроль списаний — в пару кликов"
        ],
        correct: 2
      },
      {
        q: "Сколько необходимо привлечь человек, чтобы решить ваш вопрос по «Карте жителя НСО»?",
        options: [
          "А) Минимум трое — для координации между пользователем, техподдержкой и оператором",
          "Б) Достаточно самого пользователя, который может задать вопрос по короткому номеру 110",
          "В) Не менее пяти — с учётом внутренних согласований и регламентных процедур"
        ],
        correct: 1
      },
      {
        q: "Чем отличается номер 110 от номера 112?",
        options: [
          "А) Номер 110 используется для неотложной медпомощи, 112 — для всех остальных случаев",
          "Б) Номер 110 — это линия технической поддержки сервиса «Карта жителя НСО»; 112 — единый номер экстренных служб",
          "В) Номер 110 — внутренний код госуслуги, 112 — международный стандарт вызова спасательных служб"
        ],
        correct: 1   // логически верный вариант
      }
    ];

    let quizQuestions = [];
    let currentQuestion = 0;
    let quizScore = 0;
    let answered = false;

    const questionEl = document.getElementById("quiz-question");
    const optionsEl = document.getElementById("quiz-options");
    const feedbackEl = document.getElementById("quiz-feedback");
    const nextBtn = document.getElementById("quiz-next");
    const progressEl = document.getElementById("quiz-progress");

    function getRandomQuestions(array, count) {
      const indices = array.map((_, i) => i);
      for (let i = indices.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [indices[i], indices[j]] = [indices[j], indices[i]];
      }
      return indices.slice(0, count).map((i) => array[i]);
    }

    function initQuiz() {
      quizQuestions = getRandomQuestions(fullQuizData, 4);
      currentQuestion = 0;
      quizScore = 0;
      answered = false;
      document.getElementById("quiz-main").classList.remove("hidden");
      document.getElementById("quiz-result").classList.add("hidden");
      renderQuestion();
    }

    function renderQuestion() {
      const data = quizQuestions[currentQuestion];
      questionEl.textContent = data.q;
      progressEl.textContent = `Вопрос ${currentQuestion + 1} из ${quizQuestions.length}`;
      optionsEl.innerHTML = "";
      feedbackEl.textContent = "";
      nextBtn.disabled = true;
      nextBtn.textContent =
        currentQuestion === quizQuestions.length - 1 ? "Показать результат" : "Далее";
      answered = false;

      data.options.forEach((opt, index) => {
        const btn = document.createElement("button");
        btn.className = "option";
        btn.textContent = opt;
        btn.onclick = () => selectOption(btn, index);
        optionsEl.appendChild(btn);
      });
    }

    function selectOption(button, index) {
      if (answered) return;
      answered = true;

      const data = quizQuestions[currentQuestion];
      const allButtons = optionsEl.querySelectorAll(".option");
      allButtons.forEach((btn, i) => {
        if (i === data.correct) btn.classList.add("correct");
        if (i === index && i !== data.correct) btn.classList.add("wrong");
      });

      feedbackEl.textContent = index === data.correct ? "Верно!" : "Неверно.";
      if (index === data.correct) quizScore++;

      nextBtn.disabled = false;
    }

    function nextQuestion() {
      if (!answered) return;
      currentQuestion++;
      if (currentQuestion >= quizQuestions.length) {
        showQuizResult();
      } else {
        renderQuestion();
      }
    }

    function showQuizResult() {
      document.getElementById("quiz-main").classList.add("hidden");
      const resultBlock = document.getElementById("quiz-result");
      const scoreText = document.getElementById("quiz-score-text");
      scoreText.textContent = `Вы ответили правильно на ${quizScore} из ${quizQuestions.length} вопросов.`;
      resultBlock.classList.remove("hidden");
      progressEl.textContent = "";
    }

    function restartQuiz() {
      initQuiz();
    }

    // --------- ПРОФОРИЕНТАЦИЯ ---------
    const careerData = [
      {
        q: "Какой тип задач вам ближе всего?",
        options: [
          "А) Придумывать новые сервисы на основе ИИ и анализировать данные.",
          "Б) Работать с картами, координатами и пространственными объектами.",
          "В) Помогать людям, отвечая на их вопросы по телефону и в чатах.",
          "Г) Развивать цифровую карту жителя и связанные с ней сервисы."
        ]
      },
      {
        q: "Какой результат работы вас вдохновляет больше?",
        options: [
          "А) Когда умный сервис сам подсказывает решения на основе данных.",
          "Б) Когда на карте появляется понятная схема развития района.",
          "В) Когда житель быстро получает понятный ответ на свой вопрос.",
          "Г) Когда житель видит все свои льготы, поездки и сервисы в одном месте."
        ]
      },
      {
        q: "С каким инструментом вы бы с интересом работали чаще всего?",
        options: [
          "А) Платформы машинного обучения, нейросети, аналитические панели.",
          "Б) Геоинформационные системы, спутниковые приёмники, карты местности.",
          "В) Системы обработки обращений, телефония, чат-боты и сценарии разговоров.",
          "Г) Приложение карты жителя, интеграции с транспортом и городскими сервисами."
        ]
      },
      {
        q: "В какой ситуации вы чувствуете себя на своём месте?",
        options: [
          "А) Когда экспериментируете с алгоритмами и улучшаете точность моделей.",
          "Б) Когда разбираетесь, как устроена территория и где что находится.",
          "В) Когда разговариваете с людьми и помогаете им разобраться с вопросом.",
          "Г) Когда продумываете, как жителю удобнее пользоваться льготами и сервисами."
        ]
      },
      {
        q: "Какой проект вам интереснее всего представить на Cookie Fest?",
        options: [
          "А) Чат-бот или голосовой помощник на основе ИИ для жителей города.",
          "Б) Интерактивную карту района с точными границами и объектами.",
          "В) Умный сценарий контактного центра, который сокращает время ожидания.",
          "Г) Новые возможности «Карты жителя НСО» с удобными сервисами в одном приложении."
        ]
      }
    ];

    // порядок отделов: [ОТИИ, РГИС/ССДС, ЕКЦ, реинжиниринг и ЦТ]
    let careerQuestion = 0;
    let careerScores = [0, 0, 0, 0];
    let careerAnswered = false;

    const careerQuestionEl = document.getElementById("career-question");
    const careerOptionsEl = document.getElementById("career-options");
    const careerNextBtn = document.getElementById("career-next");
    const careerProgressEl = document.getElementById("career-progress");

    const deptIds = ["dept-otii", "dept-rgis", "dept-ekc", "dept-kj"];
    const deptNames = [
      "Отдел технологий искусственного интеллекта (ОТИИ)",
      "Отдел региональной геоинформационной системы и спутниковых сервисов (РГИС НСО / ССДС НСО)",
      "Единый контактный центр (ЕКЦ)",
      "Отдел реинжиниринга и цифровой трансформации"
    ];

    let chosenDept = 0;

    function renderCareerQuestion() {
      const data = careerData[careerQuestion];
      careerQuestionEl.textContent = data.q;
      careerProgressEl.textContent = `Вопрос ${careerQuestion + 1} из ${careerData.length}`;
      careerOptionsEl.innerHTML = "";
      careerNextBtn.disabled = true;
      careerNextBtn.textContent =
        careerQuestion === careerData.length - 1 ? "Узнать результат" : "Далее";
      careerAnswered = false;

      data.options.forEach((opt, index) => {
        const btn = document.createElement("button");
        btn.className = "career-option";
        btn.textContent = opt;
        btn.onclick = () => selectCareerOption(btn, index);
        careerOptionsEl.appendChild(btn);
      });
    }

    function selectCareerOption(button, index) {
      if (careerAnswered) return;
      careerAnswered = true;

      const allButtons = careerOptionsEl.querySelectorAll(".career-option");
      allButtons.forEach((btn) => btn.classList.remove("selected"));
      button.classList.add("selected");

      careerScores[index] += 1;
      careerNextBtn.disabled = false;
    }

    function nextCareerQuestion() {
      if (!careerAnswered) return;
      careerQuestion++;
      if (careerQuestion >= careerData.length) {
        showCareerResult();
      } else {
        renderCareerQuestion();
      }
    }

    function showCareerResult() {
      document.getElementById("career-main").classList.add("hidden");
      const block = document.getElementById("career-result");
      const text = document.getElementById("career-score-text");
      const cert = document.getElementById("career-certificate");

      const maxScore = Math.max(...careerScores);
      chosenDept = careerScores.indexOf(maxScore);

      const deptName = deptNames[chosenDept];
      text.textContent = `По вашим ответам вам ближе всего ${deptName}.`;

      cert.innerHTML = `
        <img src="Сертификат.png" alt="Сертификат" class="certificate-image" />
      `;

      block.classList.remove("hidden");
      careerProgressEl.textContent = "";
    }

    function updateDeptHighlight() {
      deptIds.forEach((id, index) => {
        const el = document.getElementById(id);
        if (!el) return;
        if (index === chosenDept) {
          el.classList.add("highlight");
        } else {
          el.classList.remove("highlight");
        }
      });
    }

    function showChosenDept() {
      document.getElementById("dept-info").classList.remove("hidden");
      deptIds.forEach((id) => {
        const el = document.getElementById(id);
        if (el) el.classList.add("hidden");
      });

      const activeId = deptIds[chosenDept];
      const activeEl = document.getElementById(activeId);
      if (activeEl) activeEl.classList.remove("hidden");

      updateDeptHighlight();
      document.getElementById("career-result").classList.add("hidden");
    }

    function showAllDepts() {
      document.getElementById("dept-info").classList.remove("hidden");
      deptIds.forEach((id) => {
        const el = document.getElementById(id);
        if (el) el.classList.remove("hidden");
      });
      updateDeptHighlight();

      const btn = document.getElementById("showAllDeptsBtn");
      if (btn) btn.style.display = "none";
    }

    function restartCareer() {
      careerQuestion = 0;
      careerScores = [0, 0, 0, 0];
      careerAnswered = false;
      chosenDept = 0;

      document.getElementById("career-main").classList.remove("hidden");
      document.getElementById("career-result").classList.add("hidden");
      document.getElementById("dept-info").classList.add("hidden");

      deptIds.forEach((id) => {
        const el = document.getElementById(id);
        if (el) el.classList.remove("highlight");
      });

      const showBtn = document.getElementById("showAllDeptsBtn");
      if (showBtn) showBtn.style.display = "";

      renderCareerQuestion();
    }

    initQuiz();
    renderCareerQuestion();
  </script>
</body>
</html>
